<link href="css/msSubmarketProductSe.css" rel="stylesheet" />
<div id="submarketproduct-loading" class="loading"></div>

<div id="vmsubmarketproduct">
    <div class="modal-body ms-modal-body">
        <form>
            <div class="form-group">
                <label id="lblPopName">Name</label>
                <span class="required hidden">*</span>
                <div class="clear"></div>
                <input type="text" id="smpName" name="smpName" tabindex="0" class="modal-input txtInput w-100per" maxlength="100"
                       data-value-update="keyup" data-bind="value: Name, events: {mouseout: synchByName, change: changeName}" />
            </div>
            <hr class="modal-market-hr" />
            <div class="form-group">
                <label id="lblPopDescription">Description</label>
                <div class="clear"></div>
                <textarea id="smpDescription" name="smpDescription" class="modal-textarea w-100per" data-bind="value: Description, events: {change: changeDescription}"></textarea>
            </div>
            <div class="w-100per document-region">
                <label id="lblPopDockument">Dokument</label>
                <div class="clear"></div>
                <div data-template="smpdocument-template" data-bind="source: SubmarketProductDocuments"></div>
                <div class="clear"></div>
                <button type="button" class="ms-button smp-button-upload" id="smpUploadFile" name="smpUploadFile" data-bind="events: {click: uploadDocumentItem}">
                    <span class="icon-16 icon-upload"></span><span>Durchsuchen...</span>
                </button>
            </div>
            <div class="clear"></div>
            <div class="w-100per">
                <div class="checkbox-col">
                    <div class="checkbox" data-bind="visible: IsShowIsNew">
                        <label>
                            <input id="cbIsNew" name="cbIsNew" type="checkbox" data-bind="checked: IsNew, events: {change: newCheckedChange}" />
                            <span>IsNew</span>
                        </label>
                    </div>
                </div>
                <div class="checkbox-col">
                    <div class="checkbox" data-bind="visible: IsShowXy">
                        <label>
                            <input id="cbIsXy" type="checkbox" data-bind="checked: IsXy, events: {change: xyCheckedChange}" />
                            <span>IsXy</span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="clear"></div>
            <div class="checkbox" data-bind="visible: IsShowSubItem">
                <label>
                    <input id="cbAddSub" type="checkbox" data-bind="checked: IsCheckedSubItem, disabled: SubItems.length > 0, events: {change: subItemCheckedChange}" />
                    <span>IsSubItem</span>
                </label>
            </div>
            <div class="clear"></div>
            <div class="smp-subitem-region" data-bind="visible: IsShowSubItemsTable">
                <div class="smp-subitem-control">
                    <input type="text" id="subItemName" name="subItemName" class="modal-input txtInput subname" maxlength="100"
                           data-bind="value: SubItemName" />
                    <span class="icon-32 icon-add margin-left10 subnameplusicon" data-bind="events: {click: addSubItem}"></span>
                </div>
                <div class="clear"></div>
                <div class="smp-subitem-table">
                    <table class="table-bordered w-100per">
                        <thead>
                            <tr>
                                <td class="titlexnxx">
                                    <span>SubItems Data</span>
                                    <span class="icon-16 icon-right-block icon-plus" data-bind="events: {click: addSubItemByPlusIcon}"></span>
                                </td>
                            </tr>
                        </thead>

                        <tbody data-template="subitem-row-template" data-bind="source: SubItems"></tbody>
                    </table>
                </div>
            </div>

        </form>
    </div>

    <div class="modal-market-footer">
        <button type="button" class="ms-button" data-bind="events: {click: saveAndClose}"><span class="icon-16 icon-close margin-right6"></span><span>Save and close</span></button>
    </div>
</div>

<script id="subitem-row-template" type="text/x-kendo-template">
    <tr class="divDragDrop" data-bind="attr: {sid: Id, mindex: MIndex}">

        <td class="td-v-align-top td-hover">
            <div class="divDragDrop no-wrap" data-bind="attr: {sid: Id, mindex: MIndex}">
                <span class="icon-16 icon-arow-towway-vertical"></span>
                <span class="icon-left-block subitemname" data-bind="text: Name"></span>

                <div class="ms-dropdow">
                    <span class="icon-16 icon-dropdow" data-toggle="dropdown"></span>
                    <ul role="menu" class="popup-menu dropdown-menu ms-popup-menu posAbsolute">
                        <li><a class="dropdow-menu-li-a" data-toggle="modal" data-target=".bs-example-modal-lg" data-bind="events: {click: editSubItem}"><span class="icon-24 icon-left-block icon-edit"></span>Edit</a></li>
                        <li role="presentation" class="divider"></li>
                        <li><a class="dropdow-menu-li-a" data-bind="events: {click: delSubItem}"><span class="icon-24 icon-left-block icon-delete"></span>Delete</a></li>
                    </ul>
                </div>

            </div>
        </td>

    </tr>

</script>

<script id="smpdocument-template" type="text/x-kendo-template">
    <div class="document-item pull-left">
        <div class="pull-left">
            <a class="goal-truncate ms-link" data-bind="text: FolderFileName, events: {click: downloadDocument}"></a>
        </div>
        <span class="icon-20 ms-icon-delete-gray" data-bind="events: {click: deleteDocumentItem}"></span>
    </div>
</script>

<script src="Scripts/msSubmarketProductSe.js"></script>
